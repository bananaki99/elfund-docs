IFDat
=====

To **IFDat** αποτελεί το σχήμα αναγγελίας των επενδυτικών οργανισμών προς την
Τράπεζα της Ελλάδος. Στο :xref:`ifdat` θα βρείτε τις οδηγίες προς τις Μονάδες
Παροχής Στοιχείων.

Στο :download:`DATA_MODEL </_static/structure/IFDAT_DATAMODEL.xlsx>`
παρουσιάζεται η δομή του σχήματος δεδομένων **IFDat**.

Το :download:`JSON_SCHEMA </_static/structure/IFDAT_SCHEMA.json>` σχήμα για την
υποβολή αρχείων με βάση το **DATA_MODEL** σε μορφή **json** έχει αναπτυχθεί
σύμφωνα τα πρότυπα :xref:`json_schema_core`, :xref:`json_schema_validation`,
:xref:`openapi`.  

Με το αρχείο :download:`EXCEL_TEMPLATE
</_static/structure/IFDAT_TEMPLATE.xlsx>` γίνεται η υποβολή στοιχείων **IFDat**
σε μορφή **Excel**.


Τρόπος υποβολής των αρχείων
---------------------------
Τα αρχεία υποβάλλονται μέσω του πληροφοριακού συστήματος :xref:`iris` είτε
διαμέσου API είτε διαμέσου GUI.  Για κάθε αρχείο που υποβάλλει ένας χρήστης θα
λαμβάνει ένα απαντητικό αρχείο σχετικά με το αν το αρχείο παρελήφθη καθώς
επίσης και την ονομασία του αρχείου που χρησιμοποίησε η Τράπεζα της Ελλάδος για
να το αποθηκεύσει. Η ονομασία του αρχείου ακολουθεί τον ακόλουθο μορφότυπο
``F{ID}IFDAT_{USER}_{NAME}`` όπου το ID είναι ένας μοναδικός ακέραιος αριθμός
(ανεξάρτητα από το αν τα στοιχεία ειναι DBDat ή IFDat) εισερχόμενου αρχείου
μάκρους δέκα χαρακτήρων με πρόθεμα το 0, NAME είναι η αρχική ονομασία του
εισερχόμενου αρχείου και USER είναι ο κωδικός χρήστη όπως του έχει αποδωθεί από
το σύστημα :xref:`iris`.  Για παράδειγμα ένα εισερχόμενο αρχείο με ονομασία
**data_submission.xlsx** από τον χρήστη **aloumiotis** με ID
5 μετονομάζεται σε ``F0000000005IFDAT_aloumiotis_data_submission.xlsx``.

Οι μορφότυποι των εισερχόμενων αρχείων της δομής **IFDat** είναι οι ακόλουθοι: 

i. Αρχεία μορφής ``.json``.  Το αρχείο θα πρέπει να δομείται σύμφωνα με το :download:`IFDat JSON Schema </_static/structure/IFDAT_SCHEMA.json>`.

#. Αρχεία μορφής ``.xlsx`` με βάση το :download:`υπόδειγμα </_static/structure/IFDAT_TEMPLATE.xlsx>`.  Σε αυτή την περίπτωση το **ELFUND** θα πρέπει να μετατρέπει τα εισερχόμενα αρχεία μορφής excel σε μορφή json. 

#. Αρχεία μορφής ``.zip``.  Το αρχείο θα πρέπει να περιέχει ως περιεχόμενα μόνο ένα αρχείο με μορφή μία από τις παραπάνω.


Έλεγχοι επικύρωσης των εισερχόμενων αρχείων
-------------------------------------------
Το αρχείο επικύρωσης των δεδομένων θα έχει json μορφή και θα κληρονομεί το :download:`ACK_SCHEMA </_static/structure/ACK_SCHEMA.json>`.  


Κανόνες μετατροπής των στοιχείων σε δομή **DBDat**
--------------------------------------------------
Θα συμπληρωθεί
