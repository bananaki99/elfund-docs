Κανόνες μετατροπής IFDAT σε DAT
===============================

Κάθε συμπληρωμένος πίνακας IFDAT μετατρέπεται σε έναν η περισσότερους πίνακες DAT.

Ο πίνακας IFDAT:ACC.DPST μεταφέρεται στον πίνακα DAT:ACC.ASST_DPST χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.ASST_DBT μεταφέρεται στον πίνακα DAT:ACC.ASST_DBT χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.ASST_LN μεταφέρεται στον πίνακα DAT:ACC.ASST_LN χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.SHR μεταφέρεται στον πίνακα DAT:ACC.SHR χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.DER μεταφέρεται στον πίνακα DAT:ACC.DER χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.ASST_NN_FNNCL μεταφέρεται στον πίνακα DAT:ACC.ASST_NN_FNNCL χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.LBLT_DBT μεταφέρεται στον πίνακα DAT:ACC.LBLT_DBT χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.LBLT_LN μεταφέρεται στον πίνακα DAT:ACC.LBLT_LN χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.LBLT_RMNNG μεταφέρεται στον πίνακα DAT:ACC.LBLT_RMNNG χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.HLDR μεταφέρεται στον πίνακα DAT:ACC.HLDR χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.KEY μεταφέρεται στον πίνακα DAT:ACC.KEY χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.FEE μεταφέρεται στον πίνακα DAT:ACC.FEE χωρίς καμία άλλη αλλαγή/προσθήκη.

Ο πίνακας IFDAT:ACC.DRGTN μεταφέρεται στον πίνακα DAT:ACC.IFDAT_DRGTN χωρίς καμία άλλη αλλαγή/προσθήκη.

Από ένα αντίγραφο του πίνακα IFDAT:REF_RA διαγράφονται οι μετρήσεις LEI_ID, TAX_ID, NBR_ID και αν το αποτέλεσμα περιέχει συμπληρωμένες *μετρήσεις* μεταφέρεται στον πίνακα DAT:REF.ORG. 


Από ένα αντίγραφο του πίνακα IFDAT:REF_FND διαγράφονται οι μετρήσεις LEI_ID, TAX_ID, NBR_ID και αν το αποτέλεσμα περιέχει συμπληρωμένες *μετρήσεις* μεταφέρεται στον πίνακα 
DAT:REF.ORG. Οπότε μεταφέρονται τα πεδία ID, DT_BRTH, DT_CLS, SPLT_FRM, MRGD_WTH.

Όσον αφορα τα πεδία LEI_ID, TAX_ID, NBR_ID  αυτά μεταφέρονται στον πίνακα REF.ORG_ALIAS με τον τροπο που καθορίζεται στη συνέχεια.
#. Γίνεται έλεγχος αν το ID (LEI_ID, TAX_ID, NBR_ID) έχει συνδεθεί με ESCB-ID άλλης οντότητας. 
Ο έλεγχος αυτος πιθανότατα θα γίνει σε σχέση με κάποιον πίνακα (να συμπληρωθει ο τρόπος) όπου θα υπάρχουν όλες οι συνδέσεις LID-RID. 

*Σε περιπτωση που το ID δεν υπάρχει ήδη* έχουμε τα ids μεταφερονται στη διάσταση LID με τον εξης τροπο:
Κάθε LEI_ID για να μπει στον πίνακα REF.ORG_ALIAS θα πρέπει να του προστεθεί το προθεμα 'L'.
Κάθε TAX_ID για να μπει στον πίνακα REF.ORG_ALIAS θα πρέπει να του προστεθεί το προθεμα 'T' συν συν το 'GR' συν το τον κωδικό TAX_ID.
Κάθε NBR_ID για να μπει στον πίνακα REF.ORG_ALIAS θα πρέπει να του προστεθεί το προθεμα 'Β' συν το 'GR' συν το NBR_ID.

Το ID του πίνακα REF.FND θα μεταφερθεί στη στήλη RID του πίνακα REF.ORG_ALIAS.
Η στήλη ALIAS_OF του πίνακα  REF.ORG_ALIAS θα συμπληρώνεται με την τιμή 'Τ' όταν προσθέτουμε μία νέα εγγραφή, με την τιμή 'F' όταν καταργούμε μία εγγραφή (όταν βρούμε υπάρχουσα εγγραφή) και με '.' όταν θέλουμε να διαγράψουμε 
μία εγγραφή χωρίς να προσθέσουμε νέα και με την τιμή αρχικοποίησης όταν αυτή έχει δοθεί στον αναγνωριστικό κωδικό (LEI_ID, TAX_ID, NBR_ID). 

Το πεδιο ALIAS_OF.STATUS συμπληρώνεται με τιμή 'Α' εκτός και αν στο πεδίο REF.ORG_ALIAS υπάρχει η τιμή αρχικοποίησης οπότε αρχικοποιείται και αυτό το πεδίο με την κατάλληλη τιμη.

*Σε περίπτωση που το ID υπάρχει ήδη* επιστρέφεται warning και η εγγραφή δεν καταχωρείται στη βάση DAT.

TBC
